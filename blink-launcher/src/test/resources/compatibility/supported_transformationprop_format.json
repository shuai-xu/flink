// This file is used to make sure existing JSON files are not broken by changes.
// When a new field is added to serialized JSON, add it here to make sure future compatibility.
// WARNING: Do NOT modify or remove a format that could exist in users' JSON files from a supported release.
{
  "global": [
    {
      // fields with non-default values
      "fromStatistics": true,
      "tracingMetricsEnabled": "true",
      "isChainingEnabled": "true",
      "definiteNodes": "1",
      "possibleNodes": "2,3",
      "uncertainNodes": "4",
      "chainedGroups": "6,7,8,9,10,11 12,13,14,15 16,17,18,19",
      "originalChainedGroups": "6,7,8,9,10,11 12,13,14,15 16,17,18,19",
      "jobManagerCpuCores": 0.1,
      "jobManagerMemoryInMB": 1024,
      "sharedWorker": "true"
    }
  ],
  "nodes": [
    {
      // node with non-default values
      "id": 1,
      "uid": "1",
      "name": "node1",
      "slotSharingGroup": "test",
      "chainingStrategy": "HEAD",
      "parallelism": 8,
      "maxParallelism": 10240,
      "vcore": 0.5,
      "heap_memory": 1024,
      "direct_memory": 1,
      "native_memory": 1,
      "lock" : [ "heap_memory", "parallelism", "chainingStrategy", "vcore", "native_memory" ],
      "state_size": 1234,
      "gpu": "5",
      "work_dir_vssd": "2",
      "log_dir_vssd": "3",
      "state_native_memory": 12345,
      "otherResources": {
        "cnn": 1,
        "rnn": 2
      },
      "resourceConstraints": {
        "zk": "3",
        "hbase": "1"
      }
    },
    {
      // node with default (unassigned) values
      // default values can be omitted
      "id": 2,
      "lock" : [ "heap_memory", "parallelism" ],
      "otherResources": {
        "cnn": 5
      }
    },
    {
      // node with output of previous explicit unassigned values
      // unassgined values were output as the following before;
      // they need to be parsed to the same or equivalent values that result in the same effects
      "id": 3,
      "uid": "3",
      "name": "",
      "slotSharingGroup": "default",
      "chainingStrategy": "ALWAYS",
      "parallelism": 0,
      "maxParallelism": 1,
      "vcore": 0.0,
      "heap_memory": 0,
      "direct_memory": 0,
      "native_memory": 0,
      "state_size": 0,
      "gpu": 0,
      "work_dir_vssd": 0,
      "log_dir_vssd": 0,
      "state_native_memory": 0
    },
    {
      // node with special backward compatible values
      // null strings were output as "null" before and then parsed as string "null";
      // they will no longer output but existing JSON should parse to the same "null" string
      "id": 4,
      "name": "null",
      "slotSharingGroup": "null",
      "chainingStrategy": "null",
      "lock" : [ ]
    },
    {
      "id": 5,
      "uid": "5",
      "lock" : [ "chainingStrategy" ]
    },
    {
      "id": 6,
      "uid": "6",
      "parallelism": 101
    },
    {
      "id": 7,
      "uid": "7",
      "parallelism": 101
    }
  ],
  "links": [
    {
      // link with non-default values and also with special backward compatible values
      // null strings were output as "null" before and then parsed as string "null";
      // they will no longer output but existing JSON should parse to the same "null" string
      "source": 1,
      "target": 2,
      "ship_strategy": "null",
      "side": "null"
    },
    {
      // link with default (unassigned) values
      // default values can be omitted
      "source": 1,
      "target": 3
    },
    {
      // link with output of previous unassigned values
      // unassgined values were output as the following before;
      // they need to be parsed to the same or equivalent values that result in the same effects
      "source": 3,
      "target": 4,
      "ship_strategy": "",
      "side": ""
    },
    {
      "source": 3,
      "target": 5
    },
    {
      "source": 5,
      "target": 6
    },
    {
      "source": 6,
      "target": 7
    }
  ],
  "statefulNodes": [ 1, 3 ]
}
